generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Project {
  id             String       @id @default(cuid())
  userId         String
  title          String
  pagesRequested Int
  status         String
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt
  styleProfile   StyleProfile?
  ideas          PageIdea[]
}

model StyleProfile {
  id           String   @id @default(cuid())
  projectId    String   @unique
  stylePrompt  String
  params       Json
  seed         String?
  characterRef Json?
  project      Project  @relation(fields: [projectId], references: [id])
}

model PageIdea {
  id        String     @id @default(cuid())
  projectId String
  index     Int
  ideaText  String
  status    String
  images    PageImage[]
  project   Project    @relation(fields: [projectId], references: [id])
}

model PageImage {
  id          String   @id @default(cuid())
  pageIdeaId  String
  stage       String
  url         String
  width       Int
  height      Int
  meta        Json
  pageIdea    PageIdea @relation(fields: [pageIdeaId], references: [id])
}

model Job {
  id         String   @id @default(cuid())
  type       String
  projectId  String
  payload    Json
  status     String
  errorText  String?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}


